##volatile关键字和锁

由于volatile仅保证对单个volatile变量的读、写具有原子性,而锁的互斥执行的特性可以确保对整个临界区代码的执行具有原子性。在功能上,锁比volatile更强大;在可伸缩性和执行性能上, volatile更有优势。

## 锁的释放和获取的内存语义

当线程释放锁时, JMM会把该线程对应的本地内存中的共享变量刷新到主内存中。
当线程获取锁时, JMM会把该线程对应的本地内存置为无效。从而使得被监视器保护的临界区代码必须从主内存中读取共享变量。

